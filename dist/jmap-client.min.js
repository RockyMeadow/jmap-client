!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.jmap=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]={Client:a("./client/Client"),Utils:a("./utils/Utils"),JSONBuilder:a("./utils/JSONBuilder"),PromiseProvider:a("./promises/PromiseProvider"),ES6PromiseProvider:a("./promises/ES6PromiseProvider"),QPromiseProvider:a("./promises/QPromiseProvider"),Transport:a("./transport/Transport"),JQueryTransport:a("./transport/JQueryTransport"),RequestTransport:a("./transport/RequestTransport"),Model:a("./models/Model"),Account:a("./models/Account"),EMailer:a("./models/EMailer"),Mailbox:a("./models/Mailbox"),MessageList:a("./models/MessageList"),Message:a("./models/Message"),OutboundMessage:a("./models/OutboundMessage"),CreateMessageAck:a("./models/CreateMessageAck"),Thread:a("./models/Thread"),MailboxRole:a("./models/MailboxRole"),SetResponse:a("./models/SetResponse"),AuthAccess:a("./models/AuthAccess"),AuthContinuation:a("./models/AuthContinuation"),Constants:a("./utils/Constants"),Attachment:a("./models/Attachment"),AccountCapabilities:a("./models/AccountCapabilities"),Capabilities:a("./models/Capabilities"),MailCapabilities:a("./models/MailCapabilities"),VacationResponse:a("./models/VacationResponse")},b.exports=c["default"]},{"./client/Client":2,"./models/Account":3,"./models/AccountCapabilities":4,"./models/Attachment":5,"./models/AuthAccess":6,"./models/AuthContinuation":7,"./models/Capabilities":8,"./models/CreateMessageAck":9,"./models/EMailer":10,"./models/MailCapabilities":11,"./models/Mailbox":12,"./models/MailboxRole":13,"./models/Message":14,"./models/MessageList":15,"./models/Model":16,"./models/OutboundMessage":17,"./models/SetResponse":18,"./models/Thread":19,"./models/VacationResponse":20,"./promises/ES6PromiseProvider":21,"./promises/PromiseProvider":22,"./promises/QPromiseProvider":23,"./transport/JQueryTransport":24,"./transport/RequestTransport":25,"./transport/Transport":26,"./utils/Constants":27,"./utils/JSONBuilder":28,"./utils/Utils":29}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("./../promises/ES6PromiseProvider.js"),i=d(h),j=a("./../utils/Utils.js"),k=d(j),l=a("./../models/Account.js"),m=d(l),n=a("./../models/Mailbox.js"),o=d(n),p=a("./../models/MessageList.js"),q=d(p),r=a("./../models/SetResponse.js"),s=d(r),t=a("./../models/Thread.js"),u=d(t),v=a("./../models/Message.js"),w=d(v),x=a("./../models/OutboundMessage.js"),y=d(x),z=a("./../models/CreateMessageAck.js"),A=d(z),B=a("./../models/MailboxRole.js"),C=d(B),D=a("./../models/AuthContinuation.js"),E=d(D),F=a("./../models/AuthAccess.js"),G=d(F),H=a("../utils/Constants.js"),I=d(H),J=a("./../models/VacationResponse"),K=d(J),L=function(){function a(b,c){f(this,a),k["default"].assertRequiredParameterIsPresent(b,"transport"),this.promiseProvider=c||new i["default"],this.transport=b,this.transport.promiseProvider=this.promiseProvider}return g(a,[{key:"withAuthenticationUrl",value:function(a){return this.authenticationUrl=a,this}},{key:"withAuthenticationToken",value:function(a){return this.authToken=a,this}},{key:"withAPIUrl",value:function(a){return this.apiUrl=a,this}},{key:"withDownloadUrl",value:function(a){return this.downloadUrl=a,this}},{key:"withAuthAccess",value:function(a){var b=this;return k["default"].assertRequiredParameterHasType(a,"access",G["default"]),this.authToken=a.accessToken,["username","apiUrl","eventSourceUrl","uploadUrl","downloadUrl","versions","extensions"].forEach(function(c){b[c]=a[c]}),this}},{key:"authenticate",value:function(a,b,c){var d=this;return this.transport.post(this.authenticationUrl,this._defaultNonAuthenticatedHeaders(),{username:a,deviceName:b,clientName:I["default"].CLIENT_NAME,clientVersion:I["default"].VERSION}).then(function(a){return d._authenticateResponse(a,c)})}},{key:"_authenticateResponse",value:function(a,b){var c=this;if(a.continuationToken&&void 0===a.accessToken){var d=new E["default"](a);return b(d).then(function(a){if(d.methods.indexOf(a.method)<0)throw new Error('The "'+a.method+'" authentication protocol is not supported by the server.');var b={token:d.continuationToken,method:a.method};return a.password&&(b.password=a.password),c.transport.post(c.authenticationUrl,c._defaultNonAuthenticatedHeaders(),b)}).then(function(a){return c._authenticateResponse(a,b)})}if(a.accessToken&&void 0===a.continuationToken)return new G["default"](a);throw new Error("Unexpected response on authorization request")}},{key:"authExternal",value:function(a,b,c){return this.authenticate(a,b,function(a){return c(a).then(function(){return{method:"external"}})})}},{key:"authPassword",value:function(a,b,c){return this.authenticate(a,c,function(){return this.promiseProvider.newPromise(function(a,c){a({method:"password",password:b})})}.bind(this))}},{key:"getAccounts",value:function(a){return this._jmapRequest("getAccounts",a)}},{key:"getMailboxes",value:function(a){return this._jmapRequest("getMailboxes",a)}},{key:"setMailboxes",value:function(a){return this._jmapRequest("setMailboxes",a)}},{key:"createMailbox",value:function(a,b){var c=this;k["default"].assertRequiredParameterIsPresent(a,"name");var d=this._generateClientId();return this.setMailboxes({create:e({},d,{name:a,parentId:b})}).then(function(b){var e=b.created[d];if(!e)throw new Error("Failed to create mailbox, clientId: "+d+", message: "+(b.notCreated[d]||"none"));return new o["default"](c,e.id,e.name||a,e)})}},{key:"updateMailbox",value:function(a,b){return k["default"].assertRequiredParameterIsPresent(a,"id"),this.setMailboxes({update:e({},a,b)}).then(function(b){if(b.updated.indexOf(a)<0)throw new Error("Failed to update mailbox "+a+", the reason is: "+b.notUpdated[a])})}},{key:"destroyMailbox",value:function(a){return k["default"].assertRequiredParameterIsPresent(a,"id"),this.destroyMailboxes([a])}},{key:"destroyMailboxes",value:function(a){return k["default"].assertRequiredParameterIsArrayWithMinimumLength(a,"ids",1),this.setMailboxes({destroy:a}).then(function(a){var b=Object.keys(a.notDestroyed);if(b.length>0){var c=a.notDestroyed[b[0]],d=c.type+" ("+c.description+")";throw new Error("Failed to destroy "+b[0]+", the reason is: "+d)}})}},{key:"getMailboxWithRole",value:function(a,b){if(a instanceof C["default"]||(a=C["default"].fromRole(a)),a===C["default"].UNKNOWN)throw new Error("A valid role is required to find a mailbox by role");return this._jmapRequest("getMailboxes",b).then(function(b){for(var c=0;c<b.length;c++)if(b[c].role===a)return b[c];throw new Error("Cannot find a mailbox with role "+a.value)})}},{key:"getMessageList",value:function(a){return this._jmapRequest("getMessageList",a)}},{key:"getThreads",value:function(a){return this._jmapRequest("getThreads",a)}},{key:"getMessages",value:function(a){return this._jmapRequest("getMessages",a)}},{key:"setMessages",value:function(a){return this._jmapRequest("setMessages",a)}},{key:"updateMessage",value:function(a,b){return k["default"].assertRequiredParameterIsPresent(a,"id"),k["default"].assertRequiredParameterIsObject(b,"options"),this.setMessages({update:e({},a,b)}).then(function(b){if(b.updated.indexOf(a)<0)throw new Error("Failed to update message "+a+", the reason is: "+(b.notUpdated[a]||"missing"))})}},{key:"destroyMessage",value:function(a){return this.destroyMessages(a&&[a]).then(function(b){if(b.destroyed.indexOf(a)<0)throw new Error("Failed to destroy "+a+", the reason is: "+(b.notDestroyed[a]||"missing"))})}},{key:"destroyMessages",value:function(a){return k["default"].assertRequiredParameterIsArrayWithMinimumLength(a,"ids",1),this.setMessages({destroy:a})}},{key:"saveAsDraft",value:function(a){return this._createMessage(a,C["default"].DRAFTS)}},{key:"send",value:function(a){return this._createMessage(a,C["default"].OUTBOX)}},{key:"moveMessage",value:function(a,b){return k["default"].assertRequiredParameterIsPresent(a,"id"),k["default"].assertRequiredParameterIsArrayWithMinimumLength(b,"mailboxIds",1),this.updateMessage(a,{mailboxIds:b})}},{key:"getVacationResponse",value:function(a){return this._jmapRequest("getVacationResponse",a).then(function(a){return a[0]})}},{key:"setVacationResponse",value:function(a,b){return k["default"].assertRequiredParameterHasType(a,"vacationResponse",K["default"]),this._jmapRequest("setVacationResponse",{accountId:b&&b.accountId,update:e({},K["default"].ID,a.toJSONObject())}).then(function(a){if(a.updated.indexOf(K["default"].ID)<0)throw new Error("Failed to set vacation response. Error: "+(a.notUpdated[K["default"].ID]||"none"))})}},{key:"_createMessage",value:function(a,b){var c=this;k["default"].assertRequiredParameterHasType(a,"message",y["default"]);var d=this._generateClientId();return this.getMailboxWithRole(b).then(function(f){return a.mailboxIds=[f.id],a.isDraft=C["default"].DRAFTS.value===b.value?!0:null,c.setMessages({create:e({},d,a.toJSONObject())})}).then(function(a){if(!a.created[d])throw new Error("Failed to store message with clientId "+d+". Error: "+(a.notCreated[d]||"none"));return new A["default"](c,a.created[d])})}},{key:"_generateClientId",value:function(){return Date.now()}},{key:"_defaultNonAuthenticatedHeaders",value:function(){return{Accept:"application/json; charset=UTF-8","Content-Type":"application/json; charset=UTF-8"}}},{key:"_defaultHeaders",value:function(){return{Accept:"application/json; charset=UTF-8","Content-Type":"application/json; charset=UTF-8",Authorization:this.authToken}}},{key:"_jmapRequest",value:function(a,b){var c=this;return this.transport.post(this.apiUrl,this._defaultHeaders(),[[a,b||{},"#0"]]).then(k["default"].assertValidJMAPResponse.bind(null,a)).then(function(a){return a.map(c._handleResponse.bind(c))}).then(function(a){return a.length>1?a:a[0]})}},{key:"_handleResponse",value:function(a){var b=a[0],c=this["_handle"+k["default"].capitalize(b)+"Response"];return c?c.bind(this)(a):a[1]}},{key:"_handleListResponse",value:function(a,b,c){return k["default"]._jsonArrayToModelList(this,b,a[1].list,c)}},{key:"_handleSetResponse",value:function(a){return s["default"].fromJSONObject(this,a[1])}},{key:"_handleAccountsResponse",value:function(a){return this._handleListResponse(a,m["default"])}},{key:"_handleThreadsResponse",value:function(a){return this._handleListResponse(a,u["default"])}},{key:"_handleMessagesResponse",value:function(a){return this._handleListResponse(a,w["default"],function(a){try{return k["default"].assertRequiredParameterIsArrayWithMinimumLength(a.mailboxIds,"mailboxIds",1)}catch(b){return!1}})}},{key:"_handleMailboxesResponse",value:function(a){return this._handleListResponse(a,o["default"])}},{key:"_handleMailboxesSetResponse",value:function(a){return this._handleSetResponse(a)}},{key:"_handleMessageListResponse",value:function(a){return q["default"].fromJSONObject(this,a[1])}},{key:"_handleMessagesSetResponse",value:function(a){return this._handleSetResponse(a)}},{key:"_handleVacationResponseResponse",value:function(a){return this._handleListResponse(a,K["default"])}},{key:"_handleVacationResponseSetResponse",value:function(a){return this._handleSetResponse(a)}}]),a}();c["default"]=L,b.exports=c["default"]},{"../utils/Constants.js":27,"./../models/Account.js":3,"./../models/AuthAccess.js":6,"./../models/AuthContinuation.js":7,"./../models/CreateMessageAck.js":9,"./../models/Mailbox.js":12,"./../models/MailboxRole.js":13,"./../models/Message.js":14,"./../models/MessageList.js":15,"./../models/OutboundMessage.js":17,"./../models/SetResponse.js":18,"./../models/Thread.js":19,"./../models/VacationResponse":20,"./../promises/ES6PromiseProvider.js":21,"./../utils/Utils.js":29}],3:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=a("./Capabilities"),n=d(m),o=a("./MailCapabilities"),p=d(o),q=a("./AccountCapabilities"),r=d(q),s=function(a){function b(a,c,d){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),l["default"].assertRequiredParameterIsPresent(c,"id"),d=d||{},this.id=c,this.name=d.name||"",this.isPrimary=d.isPrimary||!1,this.capabilities=l["default"]._nullOrNewInstance(d.capabilities,r["default"]),this.mail=l["default"]._nullOrNewInstance(d.mail,p["default"]),this.contacts=l["default"]._nullOrNewInstance(d.contacts,n["default"]),this.calendars=l["default"]._nullOrNewInstance(d.calendars,n["default"])}return f(b,a),g(b,[{key:"hasMail",value:function(){return null!==this.mail}},{key:"hasCalendars",value:function(){return null!==this.calendars}},{key:"hasContacts",value:function(){return null!==this.contacts}},{key:"getMailboxes",value:function(a){return a=a||{},a.accountId=this.id,this._jmap.getMailboxes(a)}}],[{key:"fromJSONObject",value:function(a,c){return l["default"].assertRequiredParameterIsPresent(c,"object"),new b(a,c.id,c)}}]),b}(j["default"]);c["default"]=s,b.exports=c["default"]},{"../utils/Utils.js":29,"./AccountCapabilities":4,"./Capabilities":8,"./MailCapabilities":11,"./Model.js":16}],4:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(a){d(this,f),a=a||{},this.maxSizeUpload=a.maxSizeUpload||0};c["default"]=e,b.exports=c["default"]},{}],5:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=a("../utils/JSONBuilder.js"),n=d(m),o=function(a){function b(a,c,d){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),l["default"].assertRequiredParameterIsPresent(c,"blobId"),d=d||{},this.blobId=c,this.type=d.type||null,this.name=d.name||null,this.size=d.size||null,this.cid=d.cid||null,this.isInline=d.isInline||!1,this.width=d.width||null,this.height=d.height||null,this.url=d.url||null,!this.url&&a.downloadUrl&&(this.url=l["default"].fillURITemplate(a.downloadUrl,{blobId:this.blobId,name:this.name||this.blobId}))}return f(b,a),g(b,[{key:"toJSONObject",value:function(){return(new n["default"]).appendIfDefined("blobId",this.blobId).appendIfDefined("type",this.type).appendIfDefined("name",this.name).appendIfDefined("size",this.size).appendIfDefined("cid",this.cid).appendIfDefined("width",this.width).appendIfDefined("height",this.height).appendIfDefined("url",this.url).appendIfDefined("isInline",this.isInline).build()}}],[{key:"fromJSONObject",value:function(a,c){return l["default"].assertRequiredParameterIsPresent(c,"object"),new b(a,c.blobId,c)}}]),b}(j["default"]);c["default"]=o,b.exports=c["default"]},{"../utils/JSONBuilder.js":28,"../utils/Utils.js":29,"./Model.js":16}],6:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=a("../utils/Utils.js"),g=d(f),h=function i(a){e(this,i),g["default"].assertRequiredParameterIsPresent(a,"payload"),["username","accessToken","apiUrl","eventSourceUrl","uploadUrl","downloadUrl"].forEach(function(b){g["default"].assertRequiredParameterIsPresent(a[b],b)}),this.username=a.username,this.versions=a.versions||[],this.extensions=a.extensions||{},this.accessToken=a.accessToken,this.apiUrl=a.apiUrl,this.eventSourceUrl=a.eventSourceUrl,this.uploadUrl=a.uploadUrl,this.downloadUrl=a.downloadUrl};c["default"]=h,b.exports=c["default"]},{"../utils/Utils.js":29}],7:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=a("../utils/Utils.js"),g=d(f),h=function i(a){e(this,i),g["default"].assertRequiredParameterIsPresent(a,"payload"),g["default"].assertRequiredParameterIsPresent(a.continuationToken,"continuationToken"),g["default"].assertRequiredParameterIsArrayWithMinimumLength(a.methods,"methods"),this.continuationToken=a.continuationToken,this.methods=a.methods,this.prompt=a.prompt||null};c["default"]=h,b.exports=c["default"]},{"../utils/Utils.js":29}],8:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(a){d(this,f),a=a||{},this.isReadOnly=!!a.isReadOnly};c["default"]=e,b.exports=c["default"]},{}],9:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},h=a("./Model.js"),i=d(h),j=a("../utils/Utils.js"),k=d(j),l=function(a){function b(a,c){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),k["default"].assertRequiredParameterIsObject(c,"response"),k["default"].assertRequiredParameterIsPresent(c.blobId,"response.blobId"),k["default"].assertRequiredParameterHasType(c.size,"response.size","number"),this.id=c.id,this.blobId=c.blobId,this.size=c.size,this.threadId=c.threadId}return f(b,a),b}(i["default"]);c["default"]=l,b.exports=c["default"]},{"../utils/Utils.js":29,"./Model.js":16}],10:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b){d(this,a),b=b||{},this.name=b.name||"",this.email=b.email||"@"}return e(a,null,[{key:"unknown",value:function(){return new a}}]),a}();c["default"]=f,b.exports=c["default"]},{}],11:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},h=a("./Capabilities"),i=d(h),j=function(a){function b(a){e(this,b),a=a||{},g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),this.maxSizeMessageAttachments=a.maxSizeMessageAttachments||0,this.canDelaySend=!!a.canDelaySend,this.messageListSortOptions=a.messageListSortOptions||[]}return f(b,a),b}(i["default"]);c["default"]=j,b.exports=c["default"]},{"./Capabilities":8}],12:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=a("./MailboxRole.js"),n=d(m),o=function(a){function b(a,c,d,f){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),l["default"].assertRequiredParameterIsPresent(c,"id"),l["default"].assertRequiredParameterIsPresent(d,"name"),f=f||{},this.id=c,this.name=d,this.parentId=f.parentId||null,this.role=n["default"].fromRole(f.role),this.sortOrder=f.sortOrder||0,this.mustBeOnlyMailbox=f.mustBeOnlyMailbox||!1,this.mayReadItems=f.mayReadItems||!1,this.mayAddItems=f.mayAddItems||!1,this.mayRemoveItems=f.mayRemoveItems||!1,this.mayCreateChild=f.mayCreateChild||!1,this.mayRename=f.mayRename||!1,this.mayDelete=f.mayDelete||!1,this.totalMessages=f.totalMessages||0,this.unreadMessages=f.unreadMessages||0,this.totalThreads=f.totalThreads||0,this.unreadThreads=f.unreadThreads||0}return f(b,a),g(b,[{key:"getMessageList",value:function(a){return a=a||{},a.filter={inMailboxes:[this.id]},this._jmap.getMessageList(a)}},{key:"update",value:function(a){return this._jmap.updateMailbox(this.id,a)}},{key:"destroy",value:function(){return this._jmap.destroyMailbox(this.id)}}],[{key:"fromJSONObject",value:function(a,c){return l["default"].assertRequiredParameterIsPresent(c,"object"),new b(a,c.id,c.name,c)}}]),b}(j["default"]);c["default"]=o,b.exports=c["default"]},{"../utils/Utils.js":29,"./MailboxRole.js":13,"./Model.js":16}],13:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b){d(this,a),this.value=b}return e(a,null,[{key:"fromRole",value:function(b){if(b)for(var c in a)if(a.hasOwnProperty(c)&&a[c].value===b)return a[c];return a.UNKNOWN}}]),a}();["inbox","archive","drafts","outbox","sent","trash","spam","templates"].forEach(function(a){f[a.toUpperCase()]=new f(a)}),f.UNKNOWN=new f(null),c["default"]=f,b.exports=c["default"]},{}],14:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./Model.js"),j=d(i),k=a("./EMailer.js"),l=d(k),m=a("../utils/Utils.js"),n=d(m),o=a("./Attachment.js"),p=d(o),q=function(a){function b(a,c,d,f,g){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),n["default"].assertRequiredParameterIsPresent(c,"id"),n["default"].assertRequiredParameterIsPresent(d,"threadId"),n["default"].assertRequiredParameterIsArrayWithMinimumLength(f,"mailboxIds",1),g=g||{},this.id=c,this.threadId=d,this.mailboxIds=f,this.inReplyToMessageId=g.inReplyToMessageId||null,this.isUnread=g.isUnread||!1,this.isFlagged=g.isFlagged||!1,this.isAnswered=g.isAnswered||!1,this.isDraft=g.isDraft||!1,this.hasAttachment=g.hasAttachment||!1,this.headers=g.headers||{},this.from=n["default"].nthElementOrDefault(g.from,0,new l["default"](g.from)),this.to=g.to||[],this.cc=g.cc||[],this.bcc=g.bcc||[],this.replyTo=g.replyTo||[],this.subject=g.subject||null,this.date=g.date?new Date(g.date):null,this.size=g.size||0,this.preview=g.preview||null,this.textBody=g.textBody||null,this.htmlBody=g.htmlBody||null,this.attachments=n["default"]._jsonArrayToModelList(a,p["default"],g.attachments)}return f(b,a),g(b,[{key:"move",value:function(a){return this._jmap.moveMessage(this.id,a)}},{key:"moveToMailboxWithRole",value:function(a){var b=this;return this._jmap.getMailboxWithRole(a).then(function(a){return b.move([a.id])})}},{key:"update",value:function(a){return this._jmap.updateMessage(this.id,a)}},{key:"setIsFlagged",value:function(a){return n["default"].assertRequiredParameterHasType(a,"isFlagged","boolean"),this.update({isFlagged:a})}},{key:"setIsUnread",value:function(a){return n["default"].assertRequiredParameterHasType(a,"isUnread","boolean"),this.update({isUnread:a})}},{key:"setIsAnswered",value:function(a){return n["default"].assertRequiredParameterHasType(a,"isAnswered","boolean"),this.update({isAnswered:a})}},{key:"destroy",value:function(){return this._jmap.destroyMessage(this.id)}}],[{key:"fromJSONObject",value:function(a,c){return n["default"].assertRequiredParameterIsPresent(c,"object"),new b(a,c.id,c.threadId,c.mailboxIds,c)}}]),b}(j["default"]);c["default"]=q,b.exports=c["default"]},{"../utils/Utils.js":29,"./Attachment.js":5,"./EMailer.js":10,"./Model.js":16}],15:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=function(a){function b(a,c){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),c=c||{},this.accountId=c.accountId||"",this.filter=c.filter||null,this.sort=c.sort||null,this.collapseThreads=c.collapseThreads||!1,this.position=c.position||0,this.total=c.total||0,this.threadIds=c.threadIds||[],this.messageIds=c.messageIds||[]}return f(b,a),g(b,[{key:"getThreads",value:function(a){return a=a||{},a.ids=this.threadIds,this._jmap.getThreads(a)}},{key:"getMessages",value:function(a){return a=a||{},a.ids=this.messageIds,this._jmap.getMessages(a)}}],[{key:"fromJSONObject",value:function(a,c){return l["default"].assertRequiredParameterIsPresent(c,"object"),new b(a,c)}}]),b}(j["default"]);c["default"]=m,b.exports=c["default"]},{"../utils/Utils.js":29,"./Model.js":16}],16:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(a){d(this,f),this._jmap=a};c["default"]=e,b.exports=c["default"]},{}],17:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");
}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=a("./Attachment.js"),n=d(m),o=a("../utils/JSONBuilder.js"),p=d(o),q=function(a){function b(a,c){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),c=c||{},this.mailboxIds=c.mailboxIds||[],this.inReplyToMessageId=c.inReplyToMessageId||null,this.isUnread=c.isUnread,this.isFlagged=c.isFlagged,this.isAnswered=c.isAnswered,this.isDraft=c.isDraft,this.headers=c.headers||null,this.from=c.from||null,this.to=c.to||null,this.cc=c.cc||null,this.bcc=c.bcc||null,this.replyTo=c.replyTo||null,this.subject=c.subject||null,this.textBody=c.textBody||null,this.htmlBody=c.htmlBody||null,this.attachments=l["default"]._jsonArrayToModelList(a,n["default"],c.attachments)}return f(b,a),g(b,[{key:"toJSONObject",value:function(){return(new p["default"]).appendIfNotEmpty("mailboxIds",this.mailboxIds).appendIfDefined("inReplyToMessageId",this.inReplyToMessageId).appendIfDefined("isUnread",this.isUnread).appendIfDefined("isFlagged",this.isFlagged).appendIfDefined("isAnswered",this.isAnswered).appendIfDefined("isDraft",this.isDraft).appendIfDefined("headers",this.headers).appendIfDefined("from",this.from).appendIfDefined("to",this.to).appendIfDefined("cc",this.cc).appendIfDefined("bcc",this.bcc).appendIfDefined("replyTo",this.replyTo).appendIfDefined("subject",this.subject).appendIfDefined("textBody",this.textBody).appendIfDefined("htmlBody",this.htmlBody).appendIfNotEmpty("attachments",this.attachments).build()}}]),b}(j["default"]);c["default"]=q,b.exports=c["default"]},{"../utils/JSONBuilder.js":28,"../utils/Utils.js":29,"./Attachment.js":5,"./Model.js":16}],18:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=function(a){function b(a,c){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),c=c||{},this.accountId=c.accountId||null,this.oldState=c.oldState||null,this.newState=c.newState||"",this.created=c.created||{},this.updated=c.updated||[],this.destroyed=c.destroyed||[],this.notCreated=c.notCreated||{},this.notUpdated=c.notUpdated||{},this.notDestroyed=c.notDestroyed||{}}return f(b,a),g(b,null,[{key:"fromJSONObject",value:function(a,c){return l["default"].assertRequiredParameterIsPresent(c,"object"),new b(a,c)}}]),b}(j["default"]);c["default"]=m,b.exports=c["default"]},{"../utils/Utils.js":29,"./Model.js":16}],19:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},j=a("./Model.js"),k=d(j),l=a("../utils/Utils.js"),m=d(l),n=function(a){function b(a,c,d){f(this,b),i(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),m["default"].assertRequiredParameterIsPresent(c,"id"),d=d||{},this.id=c,this.messageIds=d.messageIds||[]}return g(b,a),h(b,[{key:"getMessages",value:function(a){return a=a||{},a.ids=this.messageIds,this._jmap.getMessages(a)}},{key:"setIsFlagged",value:function(a){return this._flagAllMessages("isFlagged",a)}},{key:"setIsUnread",value:function(a){return this._flagAllMessages("isUnread",a)}},{key:"move",value:function(a){return this._updateAllMessages({mailboxIds:a})}},{key:"moveToMailboxWithRole",value:function(a){var b=this;return this._jmap.getMailboxWithRole(a).then(function(a){return b.move([a.id])})}},{key:"destroy",value:function(){return this._jmap.destroyMessages(this.messageIds)}},{key:"_updateAllMessages",value:function(a){var b={};return this.messageIds.forEach(function(c){b[c]=a}),this._jmap.setMessages({update:b})}},{key:"_flagAllMessages",value:function(a,b){return m["default"].assertRequiredParameterHasType(b,"state","boolean"),this._updateAllMessages(e({},a,b))}}],[{key:"fromJSONObject",value:function(a,c){return m["default"].assertRequiredParameterIsPresent(c,"object"),new b(a,c.id,c)}}]),b}(k["default"]);c["default"]=n,b.exports=c["default"]},{"../utils/Utils.js":29,"./Model.js":16}],20:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=a("../utils/JSONBuilder.js"),n=d(m),o=function(a){function b(a,c){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),c=c||{},this.id=b.ID,this.isEnabled=c.isEnabled||!1,this.fromDate=c.fromDate?new Date(c.fromDate):null,this.toDate=c.toDate?new Date(c.toDate):null,this.subject=c.subject||null,this.textBody=c.textBody||null,this.htmlBody=c.htmlBody||null}return f(b,a),g(b,[{key:"toJSONObject",value:function(){return(new n["default"]).append("id",this.id).append("isEnabled",this.isEnabled).appendDateIfDefined("fromDate",this.fromDate).appendDateIfDefined("toDate",this.toDate).appendIfDefined("subject",this.subject).appendIfDefined("textBody",this.textBody).appendIfDefined("htmlBody",this.htmlBody).build()}}],[{key:"fromJSONObject",value:function(a,c){return l["default"].assertRequiredParameterIsPresent(c,"object"),new b(a,c)}}]),b}(j["default"]);o.ID="singleton",c["default"]=o,b.exports=c["default"]},{"../utils/JSONBuilder.js":28,"../utils/Utils.js":29,"./Model.js":16}],21:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./PromiseProvider.js"),j=d(i),k=function(a){function b(){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).apply(this,arguments)}return f(b,a),g(b,[{key:"newPromise",value:function(a){return new Promise(a)}}]),b}(j["default"]);c["default"]=k,b.exports=c["default"]},{"./PromiseProvider.js":22}],22:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,[{key:"newPromise",value:function(a){throw new Error("PromiseProvider is an abstract class. Please use a concrete implementation.")}}]),a}();c["default"]=f,b.exports=c["default"]},{}],23:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./PromiseProvider.js"),j=d(i),k=function(b){function c(){e(this,c),h(Object.getPrototypeOf(c.prototype),"constructor",this).apply(this,arguments)}return f(c,b),g(c,[{key:"newPromise",value:function(b){return a("q").Promise(b)}}]),c}(j["default"]);c["default"]=k,b.exports=c["default"]},{"./PromiseProvider.js":22,q:"q"}],24:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./Transport.js"),j=d(i),k=function(a){function b(a){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.promiseProvider=a}return f(b,a),g(b,[{key:"post",value:function(a,b,c){return this.promiseProvider.newPromise(function(d,e){jQuery.ajax({url:a,method:"POST",headers:b,data:JSON.stringify(c),dataType:"json",processData:!1,jsonp:!1}).done(d).fail(function(b,c,d){return e(new Error("POST on "+a+" returned "+b.status+" ("+(c||d)+")."))})})}}]),b}(j["default"]);c["default"]=k,b.exports=c["default"]},{"./Transport.js":26}],25:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./Transport.js"),j=d(i),k=[200,201],l=function(b){function c(a){e(this,c),h(Object.getPrototypeOf(c.prototype),"constructor",this).call(this),this.promiseProvider=a}return f(c,b),g(c,[{key:"post",value:function(b,c,d){return this.promiseProvider.newPromise(function(e,f){a("request")({url:b,headers:c,method:"POST",body:d,json:!0},function(a,c,d){return a?f(a):k.indexOf(c.statusCode)<0?f(new Error("POST on "+b+" returned "+c.statusCode+". "+d)):void e(d)})})}}]),c}(j["default"]);c["default"]=l,b.exports=c["default"]},{"./Transport.js":26,request:"request"}],26:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,[{key:"post",value:function(a,b,c){throw new Error("Transport is an abstract class. Please use a concrete implementation.")}}]),a}();c["default"]=f,b.exports=c["default"]},{}],27:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]={VERSION:"0.0.17",CLIENT_NAME:"jmap-client (https://github.com/linagora/jmap-client)"},b.exports=c["default"]},{}],28:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("../utils/Utils.js"),h=d(g),i=function(){function a(){e(this,a),this.result={}}return f(a,[{key:"append",value:function(a,b){return h["default"].assertRequiredParameterIsPresent(a,"name"),h["default"].assertRequiredParameterIsPresent(b,"value"),this.result[a]=b,this}},{key:"appendIfDefined",value:function(a,b){return h["default"].isDefined(b)&&this.append(a,b),this}},{key:"appendDateIfDefined",value:function(a,b){return h["default"].isDefined(b)&&(h["default"].assertRequiredParameterHasType(b,"date",Date),this.append(a,b.toISOString().replace(/.\d+Z/,"Z"))),this}},{key:"appendIfNotEmpty",value:function(a,b){return b&&(h["default"].assertRequiredParameterIsArrayWithMinimumLength(b,a),b.length>0&&this.append(a,b.map(function(a){return a.toJSONObject?a.toJSONObject():a}))),this}},{key:"build",value:function(){return this.result}}]),a}();c["default"]=i,b.exports=c["default"]},{"../utils/Utils.js":29}],29:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){throw d(this,a),new Error("The Utils class cannot be instantiated.")}return e(a,null,[{key:"isDefined",value:function(a){return"undefined"!=typeof a&&null!==a}},{key:"assertRequiredParameterIsPresent",value:function(b,c){if(!a.isDefined(b))throw new Error('The "'+c+'" parameter is required.');return b}},{key:"assertRequiredParameterIsObject",value:function(b,c){if(a.assertRequiredParameterIsPresent(b,c),"object"!=typeof b||Array.isArray(b))throw new Error('The "'+c+'" parameter is not an object.');return b}},{key:"assertRequiredParameterHasType",value:function(b,c,d){if(a.assertRequiredParameterIsPresent(b,c),"string"==typeof d){if(typeof b!==d)throw new Error('The "'+c+'" parameter has not the expected type: '+d)}else if(!(b instanceof d))throw new Error('The "'+c+'" parameter has not the expected type: '+d);return b}},{key:"assertRequiredParameterIsArrayWithMinimumLength",value:function(a,b,c){if(!Array.isArray(a))throw new Error('The "'+b+'" parameter must be an Array.');if(c&&a.length<c)throw new Error('The "'+b+'" parameter must have at least '+c+" element(s).");return a}},{key:"assertValidJMAPResponse",value:function(b,c){function d(a){return 0===a.filter(function(a){return!Array.isArray(a)}).length}if(!c||!Array.isArray(c))throw new Error('Expected an array as the JMAP response for a "'+b+'" request.');if(0===c.length||!d(c))throw new Error('Expected an array of exactly 1 array element as the JMAP response for a "'+b+'" request.');var e=a._expectedResponseFor(b);if(e&&c[0][0]!==e)throw new Error('Expected "'+e+'" as the JMAP response for a "'+b+'" request, but got "'+c[0][0]+'".');if(!c[0][1])throw new Error('The JMAP response for a "'+b+'" request should return some data.');return c}},{key:"capitalize",value:function(a){return a&&"string"==typeof a?a.charAt(0).toUpperCase()+a.substring(1):a}},{key:"fillURITemplate",value:function(b,c){return a.assertRequiredParameterIsPresent(b,"uri"),c?b.replace(/{(.+?)}/g,function(a,b){return c[b]||a}):b}},{key:"nthElementOrDefault",value:function(a,b,c){return Array.isArray(a)&&b>=0&&a.length>b?a[b]:c}},{key:"_jsonArrayToModelList",value:function(a,b,c,d){return Array.isArray(c)?(d&&(c=c.filter(d)),c.map(b.fromJSONObject.bind(null,a))):[]}},{key:"_nullOrNewInstance",value:function(a,b){return a&&new b(a)||null}},{key:"_expectedResponseFor",value:function(a){return{getAccounts:"accounts",getMailboxes:"mailboxes",getMessageList:"messageList",getThreads:"threads",getMessages:"messages",setMessages:"messagesSet",setMailboxes:"mailboxesSet",getVacationResponse:"vacationResponse",setVacationResponse:"vacationResponseSet"}[a]}}]),a}();c["default"]=f,b.exports=c["default"]},{}]},{},[1])(1)});