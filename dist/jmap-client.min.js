!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.jmap=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]={Client:a("./client/Client"),Utils:a("./utils/Utils"),PromiseProvider:a("./promises/PromiseProvider"),ES6PromiseProvider:a("./promises/ES6PromiseProvider"),QPromiseProvider:a("./promises/QPromiseProvider"),Transport:a("./transport/Transport"),JQueryTransport:a("./transport/JQueryTransport"),RequestTransport:a("./transport/RequestTransport"),Model:a("./models/Model"),Account:a("./models/Account"),EMailer:a("./models/EMailer"),Mailbox:a("./models/Mailbox"),MessageList:a("./models/MessageList"),Message:a("./models/Message"),Thread:a("./models/Thread")},b.exports=c["default"]},{"./client/Client":2,"./models/Account":3,"./models/EMailer":4,"./models/Mailbox":5,"./models/Message":6,"./models/MessageList":7,"./models/Model":8,"./models/Thread":9,"./promises/ES6PromiseProvider":10,"./promises/PromiseProvider":11,"./promises/QPromiseProvider":12,"./transport/JQueryTransport":13,"./transport/RequestTransport":14,"./transport/Transport":15,"./utils/Utils":16}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./../promises/ES6PromiseProvider.js"),h=d(g),i=a("./../utils/Utils.js"),j=d(i),k=a("./../models/Account.js"),l=d(k),m=a("./../models/Mailbox.js"),n=d(m),o=a("./../models/MessageList.js"),p=d(o),q=a("./../models/Thread.js"),r=d(q),s=a("./../models/Message.js"),t=d(s),u=function(){function a(b,c){e(this,a),j["default"].assertRequiredParameterIsPresent(b,"transport"),this.transport=b,this.transport.promiseProvider=c||new h["default"]}return f(a,[{key:"withAuthenticationToken",value:function(a){return this.authToken=a,this}},{key:"withAPIUrl",value:function(a){return this.apiUrl=a,this}},{key:"getAccounts",value:function(a){return this._jmapRequest("getAccounts",a)}},{key:"getMailboxes",value:function(a){return this._jmapRequest("getMailboxes",a)}},{key:"getMessageList",value:function(a){return this._jmapRequest("getMessageList",a)}},{key:"getThreads",value:function(a){return this._jmapRequest("getThreads",a)}},{key:"getMessages",value:function(a){return this._jmapRequest("getMessages",a)}},{key:"_defaultHeaders",value:function(){return{Accept:"application/json","Content-Type":"application/json",Authorization:this.authToken}}},{key:"_jmapRequest",value:function(a,b){var c=this;return this.transport.post(this.apiUrl,this._defaultHeaders(),[[a,b||{},"#0"]]).then(j["default"].assertValidJMAPResponse.bind(null,a)).then(function(a){return a.map(c._handleResponse.bind(c))}).then(function(a){return a.length>1?a:a[0]})}},{key:"_handleResponse",value:function(a){var b=a[0],c=this["_handle"+j["default"].capitalize(b)+"Response"];return c?c.bind(this)(a):a[1]}},{key:"_handleListResponse",value:function(a,b){return j["default"]._jsonArrayToModelList(this,b,a[1].list)}},{key:"_handleAccountsResponse",value:function(a){return this._handleListResponse(a,l["default"])}},{key:"_handleThreadsResponse",value:function(a){return this._handleListResponse(a,r["default"])}},{key:"_handleMessagesResponse",value:function(a){return this._handleListResponse(a,t["default"])}},{key:"_handleMailboxesResponse",value:function(a){return this._handleListResponse(a,n["default"])}},{key:"_handleMessageListResponse",value:function(a){return p["default"].fromJSONObject(this,a[1])}}]),a}();c["default"]=u,b.exports=c["default"]},{"./../models/Account.js":3,"./../models/Mailbox.js":5,"./../models/Message.js":6,"./../models/MessageList.js":7,"./../models/Thread.js":9,"./../promises/ES6PromiseProvider.js":10,"./../utils/Utils.js":16}],3:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=function(a){function b(a,c,d){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),l["default"].assertRequiredParameterIsPresent(c,"id"),d=d||{},this.id=c,this.name=d.name||"",this.isPrimary=d.isPrimary||!1,this.isReadOnly=d.isReadOnly||!1}return f(b,a),g(b,[{key:"getMailboxes",value:function(a){return a=a||{},a.accountId=this.id,this._jmap.getMailboxes(a)}}],[{key:"fromJSONObject",value:function(a,c){return l["default"].assertRequiredParameterIsPresent(c,"object"),new b(a,c.id,c)}}]),b}(j["default"]);c["default"]=m,b.exports=c["default"]},{"../utils/Utils.js":16,"./Model.js":8}],4:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b){d(this,a),b=b||{},this.name=b.name||"",this.email=b.email||"@"}return e(a,null,[{key:"unknown",value:function(){return new a}}]),a}();c["default"]=f,b.exports=c["default"]},{}],5:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=function(a){function b(a,c,d,f){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),l["default"].assertRequiredParameterIsPresent(c,"id"),l["default"].assertRequiredParameterIsPresent(d,"name"),f=f||{},this.id=c,this.name=d,this.parentId=f.parentId||null,this.role=f.role||null,this.sortOrder=f.sortOrder||0,this.mustBeOnlyMailbox=f.mustBeOnlyMailbox||!1,this.mayReadItems=f.mayReadItems||!1,this.mayAddItems=f.mayAddItems||!1,this.mayRemoveItems=f.mayRemoveItems||!1,this.mayCreateChild=f.mayCreateChild||!1,this.mayRename=f.mayRename||!1,this.mayDelete=f.mayDelete||!1,this.totalMessages=f.totalMessages||0,this.unreadMessages=f.unreadMessages||0,this.totalThreads=f.totalThreads||0,this.unreadThreads=f.unreadThreads||0}return f(b,a),g(b,[{key:"getMessageList",value:function(a){return a=a||{},a.filter={inMailboxes:[this.id]},this._jmap.getMessageList(a)}}],[{key:"fromJSONObject",value:function(a,c){return l["default"].assertRequiredParameterIsPresent(c,"object"),new b(a,c.id,c.name,c)}}]),b}(j["default"]);c["default"]=m,b.exports=c["default"]},{"../utils/Utils.js":16,"./Model.js":8}],6:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./Model.js"),j=d(i),k=a("./EMailer.js"),l=d(k),m=a("../utils/Utils.js"),n=d(m),o=function(a){function b(a,c,d,f,g){if(e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),n["default"].assertRequiredParameterIsPresent(c,"id"),n["default"].assertRequiredParameterIsPresent(d,"threadId"),!Array.isArray(f)||f.length<1)throw new Error("A Message object is required to be in at least one Mailbox.");g=g||{},this.id=c,this.threadId=d,this.mailboxIds=f,this.inReplyToMessageId=g.inReplyToMessageId||null,this.isUnread=g.isUnread||!1,this.isFlagged=g.isFlagged||!1,this.isAnswered=g.isAnswered||!1,this.isDraft=g.isDraft||!1,this.hasAttachment=g.hasAttachment||!1,this.headers=g.headers||{},this.from=g.from||l["default"].unknown(),this.to=g.to||[l["default"].unknown()],this.cc=g.cc||[l["default"].unknown()],this.bcc=g.bcc||[l["default"].unknown()],this.replyTo=g.replyTo||l["default"].unknown(),this.subject=g.subject||null,this.date=g.date?new Date(g.date):null,this.size=g.size||0,this.preview=g.preview||null,this.textBody=g.textBody||null,this.htmlBody=g.htmlBody||null}return f(b,a),g(b,null,[{key:"fromJSONObject",value:function(a,c){return n["default"].assertRequiredParameterIsPresent(c,"object"),new b(a,c.id,c.threadId,c.mailboxIds,c)}}]),b}(j["default"]);c["default"]=o,b.exports=c["default"]},{"../utils/Utils.js":16,"./EMailer.js":4,"./Model.js":8}],7:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=function(a){function b(a,c){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),c=c||{},this.accountId=c.accountId||"",this.filter=c.filter||null,this.sort=c.sort||null,this.collapseThreads=c.collapseThreads||!1,this.position=c.position||0,this.total=c.total||0,this.threadIds=c.threadIds||[],this.messageIds=c.messageIds||[]}return f(b,a),g(b,[{key:"getThreads",value:function(a){return a=a||{},a.ids=this.threadIds,this._jmap.getThreads(a)}},{key:"getMessages",value:function(a){return a=a||{},a.ids=this.messageIds,this._jmap.getMessages(a)}}],[{key:"fromJSONObject",value:function(a,c){return l["default"].assertRequiredParameterIsPresent(c,"object"),new b(a,c)}}]),b}(j["default"]);c["default"]=m,b.exports=c["default"]},{"../utils/Utils.js":16,"./Model.js":8}],8:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(a){d(this,f),this._jmap=a};c["default"]=e,b.exports=c["default"]},{}],9:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=function(a){function b(a,c,d){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),l["default"].assertRequiredParameterIsPresent(c,"id"),d=d||{},this.id=c,this.messageIds=d.messageIds||[]}return f(b,a),g(b,[{key:"getMessages",value:function(a){return a=a||{},a.ids=this.messageIds,this._jmap.getMessages(a)}}],[{key:"fromJSONObject",value:function(a,c){return l["default"].assertRequiredParameterIsPresent(c,"object"),new b(a,c.id,c)}}]),b}(j["default"]);c["default"]=m,b.exports=c["default"]},{"../utils/Utils.js":16,"./Model.js":8}],10:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./PromiseProvider.js"),j=d(i),k=function(a){function b(){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).apply(this,arguments)}return f(b,a),g(b,[{key:"newPromise",value:function(a){return new Promise(a)}}]),b}(j["default"]);c["default"]=k,b.exports=c["default"]},{"./PromiseProvider.js":11}],11:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,[{key:"newPromise",value:function(a){throw new Error("PromiseProvider is an abstract class. Please use a concrete implementation.")}}]),a}();c["default"]=f,b.exports=c["default"]},{}],12:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./PromiseProvider.js"),j=d(i),k=function(b){function c(){e(this,c),h(Object.getPrototypeOf(c.prototype),"constructor",this).apply(this,arguments)}return f(c,b),g(c,[{key:"newPromise",value:function(b){return a("q").Promise(b)}}]),c}(j["default"]);c["default"]=k,b.exports=c["default"]},{"./PromiseProvider.js":11,q:"q"}],13:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./Transport.js"),j=d(i),k=function(a){function b(a){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.promiseProvider=a}return f(b,a),g(b,[{key:"post",value:function(a,b,c){return this.promiseProvider.newPromise(function(d,e){jQuery.ajax({url:a,method:"POST",headers:b,data:JSON.stringify(c),dataType:"json",processData:!1,jsonp:!1}).done(d).fail(function(b,c,d){return e(new Error("POST on "+a+" returned "+b.status+" ("+(c||d)+")."))})})}}]),b}(j["default"]);c["default"]=k,b.exports=c["default"]},{"./Transport.js":15}],14:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./Transport.js"),j=d(i),k=function(b){function c(a){e(this,c),h(Object.getPrototypeOf(c.prototype),"constructor",this).call(this),this.promiseProvider=a}return f(c,b),g(c,[{key:"post",value:function(b,c,d){return this.promiseProvider.newPromise(function(e,f){a("request")({url:b,headers:c,method:"POST",body:d,json:!0},function(a,c,d){return a?f(a):200!==c.statusCode?f(new Error("POST on "+b+" returned "+c.statusCode+". "+d)):void e(d)})})}}]),c}(j["default"]);c["default"]=k,b.exports=c["default"]},{"./Transport.js":15,request:"request"}],15:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,[{key:"post",value:function(a,b,c){throw new Error("Transport is an abstract class. Please use a concrete implementation.")}}]),a}();c["default"]=f,b.exports=c["default"]},{}],16:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){throw d(this,a),new Error("The Utils class cannot be instantiated.")}return e(a,null,[{key:"assertRequiredParameterIsPresent",value:function(a,b){if(!a)throw new Error('The "'+b+'" parameter is required.');return a}},{key:"assertValidJMAPResponse",value:function(b,c){function d(a){return 0===a.filter(function(a){return!Array.isArray(a)}).length}if(!c||!Array.isArray(c))throw new Error('Expected an array as the JMAP response for a "'+b+'" request.');if(0===c.length||!d(c))throw new Error('Expected an array of exactly 1 array element as the JMAP response for a "'+b+'" request.');var e=a._expectedResponseFor(b);if(e&&c[0][0]!==e)throw new Error('Expected "'+e+'" as the JMAP response for a "'+b+'" request, but got "'+c[0][0]+'".');if(!c[0][1])throw new Error('The JMAP response for a "'+b+'" request should return some data.');return c}},{key:"capitalize",value:function(a){return a&&"string"==typeof a?a.charAt(0).toUpperCase()+a.substring(1):a}},{key:"_jsonArrayToModelList",value:function(a,b,c){return c.map(b.fromJSONObject.bind(null,a))}},{key:"_expectedResponseFor",value:function(a){return{getAccounts:"accounts",getMailboxes:"mailboxes",getMessageList:"messageList",getThreads:"threads",getMessages:"messages"}[a]}}]),a}();c["default"]=f,b.exports=c["default"]},{}]},{},[1])(1)});